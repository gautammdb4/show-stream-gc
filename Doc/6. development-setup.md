# ShowStream - Development Setup Guide

## üìã Overview

This guide provides comprehensive instructions for setting up the ShowStream development environment, including all necessary tools, dependencies, and configurations required for local development.

## üéØ Prerequisites

### System Requirements
- **Operating System:** Windows 10+, macOS 10.15+, or Linux (Ubuntu 18.04+)
- **RAM:** Minimum 16GB (recommended for running all services locally)
- **Storage:** 20GB free space for development tools and dependencies
- **CPU:** Multi-core processor (4+ cores recommended)

### Required Software Versions
- **Java:** OpenJDK 17 or higher
- **Maven:** 3.8.0 or higher
- **Docker:** 20.10.0 or higher
- **Docker Compose:** 2.0.0 or higher
- **Node.js:** 16.0.0 or higher (for development tools)
- **Git:** 2.30.0 or higher

## üîß Development Environment Setup

### Step 1: Install Java Development Kit (JDK)

#### Option A: Using SDKMAN (Recommended for Linux/macOS)
```bash
# Install SDKMAN
curl -s "https://get.sdkman.io" | bash
source "$HOME/.sdkman/bin/sdkman-init.sh"

# Install OpenJDK 17
sdk install java 17.0.8-tem
sdk use java 17.0.8-tem

# Verify installation
java -version
javac -version
```

#### Option B: Manual Installation
1. Download OpenJDK 17 from [Adoptium](https://adoptium.net/)
2. Install following platform-specific instructions
3. Set JAVA_HOME environment variable
4. Add Java to PATH

**Windows PowerShell:**
```powershell
$env:JAVA_HOME = "C:\Program Files\Eclipse Adoptium\jdk-17.0.8.101-hotspot"
$env:PATH += ";$env:JAVA_HOME\bin"
```

**Linux/macOS Bash:**
```bash
export JAVA_HOME=/usr/lib/jvm/java-17-openjdk
export PATH=$PATH:$JAVA_HOME/bin
```

### Step 2: Install Maven Build Tool

#### Using Package Managers
**macOS (Homebrew):**
```bash
brew install maven
```

**Ubuntu/Debian:**
```bash
sudo apt update
sudo apt install maven
```

**Windows (Chocolatey):**
```powershell
choco install maven
```

#### Manual Installation
1. Download Maven from [Apache Maven](https://maven.apache.org/download.cgi)
2. Extract to desired location
3. Set M2_HOME environment variable
4. Add Maven to PATH

### Step 3: Install Docker and Docker Compose

#### Docker Desktop (Windows/macOS)
1. Download Docker Desktop from [Docker Website](https://www.docker.com/products/docker-desktop)
2. Install following platform-specific instructions
3. Start Docker Desktop
4. Verify installation:
```bash
docker --version
docker-compose --version
```

#### Docker Engine (Linux)
```bash
# Ubuntu/Debian
sudo apt update
sudo apt install docker.io docker-compose
sudo systemctl start docker
sudo systemctl enable docker
sudo usermod -aG docker $USER

# Verify installation
docker --version
docker-compose --version
```

### Step 4: Install Git Version Control

#### Package Manager Installation
**macOS:**
```bash
brew install git
```

**Ubuntu/Debian:**
```bash
sudo apt install git
```

**Windows:**
Download Git from [Git for Windows](https://gitforwindows.org/)

#### Git Configuration
```bash
git config --global user.name "Your Name"
git config --global user.email "your.email@example.com"
git config --global init.defaultBranch main
```

### Step 5: IDE Setup (IntelliJ IDEA Recommended)

#### IntelliJ IDEA Ultimate (Recommended)
1. Download from [JetBrains](https://www.jetbrains.com/idea/)
2. Install with default settings
3. Install required plugins:
   - Spring Boot
   - Docker
   - Kubernetes
   - SonarLint
   - CheckStyle-IDEA

#### VS Code Alternative
1. Install VS Code from [Microsoft](https://code.visualstudio.com/)
2. Install extensions:
   - Extension Pack for Java
   - Spring Boot Extension Pack
   - Docker
   - Kubernetes
   - SonarLint

## üìÅ Project Structure Setup

### Repository Clone and Setup
```bash
# Clone the repository
git clone https://github.com/your-username/showstream-platform.git
cd showstream-platform

# Create development branch
git checkout -b develop
git push -u origin develop

# Create feature branch for development
git checkout -b feature/initial-setup
```

### Directory Structure
```
showstream-platform/
‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îú‚îÄ‚îÄ user-service/
‚îÇ   ‚îú‚îÄ‚îÄ event-service/
‚îÇ   ‚îú‚îÄ‚îÄ inventory-service/
‚îÇ   ‚îú‚îÄ‚îÄ booking-service/
‚îÇ   ‚îú‚îÄ‚îÄ payment-service/
‚îÇ   ‚îú‚îÄ‚îÄ notification-service/
‚îÇ   ‚îî‚îÄ‚îÄ analytics-service/
‚îú‚îÄ‚îÄ api-gateway/
‚îú‚îÄ‚îÄ infrastructure/
‚îÇ   ‚îú‚îÄ‚îÄ docker/
‚îÇ   ‚îú‚îÄ‚îÄ kubernetes/
‚îÇ   ‚îî‚îÄ‚îÄ terraform/
‚îú‚îÄ‚îÄ shared-libraries/
‚îú‚îÄ‚îÄ documentation/
‚îú‚îÄ‚îÄ testing/
‚îú‚îÄ‚îÄ scripts/
‚îú‚îÄ‚îÄ docker-compose.yml
‚îú‚îÄ‚îÄ docker-compose.override.yml
‚îú‚îÄ‚îÄ README.md
‚îî‚îÄ‚îÄ .gitignore
```

### Create Initial Project Structure
```bash
# Create service directories
mkdir -p services/{user-service,event-service,inventory-service,booking-service,payment-service,notification-service,analytics-service}
mkdir -p api-gateway infrastructure/{docker,kubernetes,terraform} shared-libraries documentation testing scripts

# Create common configuration files
touch docker-compose.yml docker-compose.override.yml README.md .gitignore
```

## üê≥ Docker Development Environment

### Docker Compose Configuration

#### Create `docker-compose.yml`
```yaml
version: '3.8'

services:
  # PostgreSQL databases for each service
  user-db:
    image: postgres:15-alpine
    container_name: showstream-user-db
    environment:
      POSTGRES_DB: user_service
      POSTGRES_USER: showstream_user
      POSTGRES_PASSWORD: dev_password_123
    ports:
      - "5432:5432"
    volumes:
      - user_db_data:/var/lib/postgresql/data
      - ./infrastructure/docker/init-scripts:/docker-entrypoint-initdb.d

  event-db:
    image: postgres:15-alpine
    container_name: showstream-event-db
    environment:
      POSTGRES_DB: event_service
      POSTGRES_USER: showstream_user
      POSTGRES_PASSWORD: dev_password_123
    ports:
      - "5433:5432"
    volumes:
      - event_db_data:/var/lib/postgresql/data

  booking-db:
    image: postgres:15-alpine
    container_name: showstream-booking-db
    environment:
      POSTGRES_DB: booking_service
      POSTGRES_USER: showstream_user
      POSTGRES_PASSWORD: dev_password_123
    ports:
      - "5434:5432"
    volumes:
      - booking_db_data:/var/lib/postgresql/data

  # Redis for caching and session management
  redis:
    image: redis:7-alpine
    container_name: showstream-redis
    ports:
      - "6379:6379"
    volumes:
      - redis_data:/data
    command: redis-server --appendonly yes --requirepass dev_redis_123

  # Elasticsearch for search functionality
  elasticsearch:
    image: docker.elastic.co/elasticsearch/elasticsearch:8.10.0
    container_name: showstream-elasticsearch
    environment:
      - discovery.type=single-node
      - xpack.security.enabled=false
      - "ES_JAVA_OPTS=-Xms1g -Xmx1g"
    ports:
      - "9200:9200"
    volumes:
      - elasticsearch_data:/usr/share/elasticsearch/data

  # Kafka for event streaming
  zookeeper:
    image: confluentinc/cp-zookeeper:latest
    container_name: showstream-zookeeper
    environment:
      ZOOKEEPER_CLIENT_PORT: 2181
      ZOOKEEPER_TICK_TIME: 2000

  kafka:
    image: confluentinc/cp-kafka:latest
    container_name: showstream-kafka
    depends_on:
      - zookeeper
    environment:
      KAFKA_BROKER_ID: 1
      KAFKA_ZOOKEEPER_CONNECT: zookeeper:2181
      KAFKA_ADVERTISED_LISTENERS: PLAINTEXT://localhost:9092
      KAFKA_OFFSETS_TOPIC_REPLICATION_FACTOR: 1
      KAFKA_AUTO_CREATE_TOPICS_ENABLE: true
    ports:
      - "9092:9092"

  # Kafka UI for development
  kafka-ui:
    image: provectuslabs/kafka-ui:latest
    container_name: showstream-kafka-ui
    depends_on:
      - kafka
    environment:
      KAFKA_CLUSTERS_0_NAME: local
      KAFKA_CLUSTERS_0_BOOTSTRAPSERVERS: kafka:9092
    ports:
      - "8080:8080"

  # Monitoring stack
  prometheus:
    image: prom/prometheus:latest
    container_name: showstream-prometheus
    ports:
      - "9090:9090"
    volumes:
      - ./infrastructure/docker/prometheus.yml:/etc/prometheus/prometheus.yml
      - prometheus_data:/prometheus

  grafana:
    image: grafana/grafana:latest
    container_name: showstream-grafana
    environment:
      GF_SECURITY_ADMIN_PASSWORD: admin123
    ports:
      - "3000:3000"
    volumes:
      - grafana_data:/var/lib/grafana
      - ./infrastructure/docker/grafana/dashboards:/etc/grafana/provisioning/dashboards
      - ./infrastructure/docker/grafana/datasources:/etc/grafana/provisioning/datasources

volumes:
  user_db_data:
  event_db_data:
  booking_db_data:
  redis_data:
  elasticsearch_data:
  prometheus_data:
  grafana_data:

networks:
  default:
    name: showstream-network
```

#### Create `docker-compose.override.yml` for Development
```yaml
version: '3.8'

services:
  # Development overrides for faster startup and debugging
  user-db:
    environment:
      POSTGRES_LOG_STATEMENT: all
      POSTGRES_LOG_MIN_DURATION_STATEMENT: 0

  event-db:
    environment:
      POSTGRES_LOG_STATEMENT: all
      POSTGRES_LOG_MIN_DURATION_STATEMENT: 0

  kafka:
    environment:
      KAFKA_LOG_RETENTION_HOURS: 1
      KAFKA_LOG_SEGMENT_BYTES: 1048576
```

### Infrastructure Configuration Files

#### Create `infrastructure/docker/prometheus.yml`
```yaml
global:
  scrape_interval: 15s
  evaluation_interval: 15s

scrape_configs:
  - job_name: 'showstream-services'
    static_configs:
      - targets: ['host.docker.internal:8081', 'host.docker.internal:8082', 'host.docker.internal:8083']
    scrape_interval: 5s
    metrics_path: '/actuator/prometheus'

  - job_name: 'redis'
    static_configs:
      - targets: ['redis:6379']

  - job_name: 'kafka'
    static_configs:
      - targets: ['kafka:9092']
```

#### Create Database Initialization Scripts
```bash
# Create database init directory
mkdir -p infrastructure/docker/init-scripts

# Create init script for user database
cat > infrastructure/docker/init-scripts/01-init-user-db.sql << EOF
-- User service database initialization
CREATE SCHEMA IF NOT EXISTS user_management;

-- Create extensions
CREATE EXTENSION IF NOT EXISTS "uuid-ossp";
CREATE EXTENSION IF NOT EXISTS "pgcrypto";

-- Create application user
CREATE ROLE app_user LOGIN PASSWORD 'app_password_123';
GRANT USAGE ON SCHEMA user_management TO app_user;
GRANT ALL PRIVILEGES ON ALL TABLES IN SCHEMA user_management TO app_user;
GRANT ALL PRIVILEGES ON ALL SEQUENCES IN SCHEMA user_management TO app_user;
EOF
```

## üõ†Ô∏è Development Tools Configuration

### Maven Parent POM Configuration

#### Create Root `pom.xml`
```xml
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>com.showstream</groupId>
    <artifactId>showstream-platform</artifactId>
    <version>1.0.0-SNAPSHOT</version>
    <packaging>pom</packaging>

    <name>ShowStream Platform</name>
    <description>Entertainment Booking Platform - Microservices Architecture</description>

    <properties>
        <java.version>17</java.version>
        <maven.compiler.source>17</maven.compiler.source>
        <maven.compiler.target>17</maven.compiler.target>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
        
        <spring-boot.version>3.1.5</spring-boot.version>
        <spring-cloud.version>2022.0.4</spring-cloud.version>
        <testcontainers.version>1.19.1</testcontainers.version>
    </properties>

    <modules>
        <module>services/user-service</module>
        <module>services/event-service</module>
        <module>services/inventory-service</module>
        <module>services/booking-service</module>
        <module>services/payment-service</module>
        <module>services/notification-service</module>
        <module>services/analytics-service</module>
        <module>api-gateway</module>
        <module>shared-libraries</module>
    </modules>

    <dependencyManagement>
        <dependencies>
            <dependency>
                <groupId>org.springframework.boot</groupId>
                <artifactId>spring-boot-dependencies</artifactId>
                <version>${spring-boot.version}</version>
                <type>pom</type>
                <scope>import</scope>
            </dependency>
            <dependency>
                <groupId>org.springframework.cloud</groupId>
                <artifactId>spring-cloud-dependencies</artifactId>
                <version>${spring-cloud.version}</version>
                <type>pom</type>
                <scope>import</scope>
            </dependency>
            <dependency>
                <groupId>org.testcontainers</groupId>
                <artifactId>testcontainers-bom</artifactId>
                <version>${testcontainers.version}</version>
                <type>pom</type>
                <scope>import</scope>
            </dependency>
        </dependencies>
    </dependencyManagement>

    <build>
        <pluginManagement>
            <plugins>
                <plugin>
                    <groupId>org.springframework.boot</groupId>
                    <artifactId>spring-boot-maven-plugin</artifactId>
                    <version>${spring-boot.version}</version>
                </plugin>
                <plugin>
                    <groupId>org.jacoco</groupId>
                    <artifactId>jacoco-maven-plugin</artifactId>
                    <version>0.8.8</version>
                </plugin>
                <plugin>
                    <groupId>org.sonarsource.scanner.maven</groupId>
                    <artifactId>sonar-maven-plugin</artifactId>
                    <version>3.9.1.2184</version>
                </plugin>
            </plugins>
        </pluginManagement>
    </build>
</project>
```

### Git Configuration

#### Create `.gitignore`
```gitignore
# Compiled class file
*.class

# Log file
*.log

# BlueJ files
*.ctxt

# Mobile Tools for Java (J2ME)
.mtj.tmp/

# Package Files
*.jar
*.war
*.nar
*.ear
*.zip
*.tar.gz
*.rar

# Virtual machine crash logs
hs_err_pid*

# Maven
target/
!.mvn/wrapper/maven-wrapper.jar
!**/src/main/**/target/
!**/src/test/**/target/

# Gradle
.gradle
build/
!gradle/wrapper/gradle-wrapper.jar
!**/src/main/**/build/
!**/src/test/**/build/

# IntelliJ IDEA
.idea/
*.iws
*.iml
*.ipr

# Eclipse
.apt_generated
.classpath
.factorypath
.project
.settings
.springBeans
.sts4-cache

# VS Code
.vscode/

# macOS
.DS_Store

# Windows
Thumbs.db

# Environment files
.env
.env.local
.env.development.local
.env.test.local
.env.production.local

# Docker
.dockerignore

# Logs
logs/
*.log
npm-debug.log*
yarn-debug.log*
yarn-error.log*

# Database
*.sqlite
*.db

# Temporary files
tmp/
temp/
```

## üöÄ Development Workflow Setup

### Development Scripts

#### Create `scripts/dev-start.sh`
```bash
#!/bin/bash

echo "üöÄ Starting ShowStream Development Environment..."

# Start infrastructure services
echo "üì¶ Starting infrastructure services..."
docker-compose up -d user-db event-db booking-db redis elasticsearch kafka zookeeper

# Wait for services to be ready
echo "‚è≥ Waiting for services to be ready..."
sleep 30

# Check service health
echo "üîç Checking service health..."
docker-compose ps

# Start monitoring (optional)
echo "üìä Starting monitoring stack..."
docker-compose up -d prometheus grafana kafka-ui

echo "‚úÖ Development environment started successfully!"
echo ""
echo "üîó Service URLs:"
echo "  - Kafka UI: http://localhost:8080"
echo "  - Grafana: http://localhost:3000 (admin/admin123)"
echo "  - Prometheus: http://localhost:9090"
echo "  - Elasticsearch: http://localhost:9200"
echo ""
echo "üìä Database Connections:"
echo "  - User DB: localhost:5432/user_service"
echo "  - Event DB: localhost:5433/event_service"
echo "  - Booking DB: localhost:5434/booking_service"
echo "  - Redis: localhost:6379"
```

#### Create `scripts/dev-stop.sh`
```bash
#!/bin/bash

echo "üõë Stopping ShowStream Development Environment..."

# Stop all services
docker-compose down

# Optional: Remove volumes (uncomment to reset data)
# docker-compose down -v

echo "‚úÖ Development environment stopped successfully!"
```

#### Create `scripts/dev-reset.sh`
```bash
#!/bin/bash

echo "üîÑ Resetting ShowStream Development Environment..."

# Stop and remove all containers and volumes
docker-compose down -v

# Remove unused images (optional)
docker system prune -f

# Start fresh environment
./scripts/dev-start.sh

echo "‚úÖ Development environment reset successfully!"
```

### Make Scripts Executable
```bash
chmod +x scripts/*.sh
```

## üß™ Testing Environment Setup

### Test Configuration

#### Create `testing/docker-compose.test.yml`
```yaml
version: '3.8'

services:
  test-db:
    image: postgres:15-alpine
    environment:
      POSTGRES_DB: test_db
      POSTGRES_USER: test_user
      POSTGRES_PASSWORD: test_pass
    tmpfs:
      - /var/lib/postgresql/data
    command: ["postgres", "-c", "fsync=off", "-c", "synchronous_commit=off", "-c", "full_page_writes=off"]

  test-redis:
    image: redis:7-alpine
    tmpfs:
      - /data
```

#### Create Test Runner Script
```bash
cat > scripts/run-tests.sh << 'EOF'
#!/bin/bash

echo "üß™ Running ShowStream Test Suite..."

# Start test infrastructure
echo "üèóÔ∏è Starting test infrastructure..."
docker-compose -f testing/docker-compose.test.yml up -d

# Wait for services
sleep 10

# Run tests for each service
echo "üîç Running unit tests..."
mvn clean test

echo "üîó Running integration tests..."
mvn clean verify -Pintegration-tests

# Cleanup test infrastructure
echo "üßπ Cleaning up test infrastructure..."
docker-compose -f testing/docker-compose.test.yml down

echo "‚úÖ Test suite completed!"
EOF

chmod +x scripts/run-tests.sh
```

## üìù IDE Configuration

### IntelliJ IDEA Configuration

#### Import Project
1. Open IntelliJ IDEA
2. Select "Open" and choose the `showstream-platform` directory
3. Import as Maven project
4. Wait for dependency resolution

#### Configure Code Style
1. Go to `File > Settings > Editor > Code Style`
2. Import code style settings (create custom ShowStream style)
3. Set line separator to LF (Unix)
4. Set encoding to UTF-8

#### Configure Run Configurations
Create run configurations for each service:
1. Go to `Run > Edit Configurations`
2. Add new Spring Boot configuration
3. Set main class and working directory
4. Add environment variables and VM options

### VS Code Configuration

#### Create `.vscode/settings.json`
```json
{
    "java.configuration.updateBuildConfiguration": "automatic",
    "java.compile.nullAnalysis.mode": "automatic",
    "java.format.settings.url": "https://raw.githubusercontent.com/google/styleguide/gh-pages/eclipse-java-google-style.xml",
    "editor.tabSize": 4,
    "editor.insertSpaces": true,
    "files.encoding": "utf8",
    "files.eol": "\n",
    "docker.defaultRegistry": "docker.io"
}
```

#### Create `.vscode/launch.json`
```json
{
    "version": "0.2.0",
    "configurations": [
        {
            "type": "java",
            "name": "Launch User Service",
            "request": "launch",
            "mainClass": "com.showstream.userservice.UserServiceApplication",
            "projectName": "user-service",
            "env": {
                "SPRING_PROFILES_ACTIVE": "local"
            }
        }
    ]
}
```

## ‚úÖ Environment Verification

### Verification Script

#### Create `scripts/verify-setup.sh`
```bash
#!/bin/bash

echo "üîç Verifying ShowStream Development Environment..."

# Check Java
echo "‚òï Java version:"
java -version

# Check Maven
echo "üì¶ Maven version:"
mvn -version

# Check Docker
echo "üê≥ Docker version:"
docker --version
docker-compose --version

# Check Git
echo "üìö Git version:"
git --version

# Test Docker connectivity
echo "üîó Testing Docker connectivity..."
docker run --rm hello-world

# Check if ports are available
echo "üîç Checking port availability..."
for port in 5432 5433 5434 6379 8080 9090 9092 9200; do
    if lsof -Pi :$port -sTCP:LISTEN -t >/dev/null ; then
        echo "‚ö†Ô∏è  Port $port is already in use"
    else
        echo "‚úÖ Port $port is available"
    fi
done

# Start development environment
echo "üöÄ Starting development environment..."
./scripts/dev-start.sh

# Verify services
echo "üîç Verifying service connectivity..."
sleep 60

# Test database connections
echo "Testing database connections..."
docker-compose exec -T user-db pg_isready -h localhost -p 5432 -U showstream_user

# Test Redis
echo "Testing Redis connection..."
docker-compose exec -T redis redis-cli -a dev_redis_123 ping

# Test Kafka
echo "Testing Kafka connection..."
docker-compose exec -T kafka kafka-topics --bootstrap-server localhost:9092 --list

echo "‚úÖ Environment verification completed!"
```

### Make Verification Script Executable
```bash
chmod +x scripts/verify-setup.sh
```

### Run Verification
```bash
./scripts/verify-setup.sh
```

## üìö Next Steps

After completing this setup guide:

1. **Verify Environment:** Run the verification script to ensure everything is working
2. **Create First Service:** Start with the User Management Service
3. **Set up CI/CD:** Configure GitHub Actions for automated testing
4. **Implement Monitoring:** Set up application monitoring and logging
5. **Write Tests:** Create comprehensive test suites for each service

## üÜò Troubleshooting

### Common Issues and Solutions

#### Docker Issues
- **Port conflicts:** Stop services using required ports or change port mappings
- **Memory issues:** Increase Docker memory allocation to 8GB+
- **Permission issues on Linux:** Add user to docker group

#### Database Connection Issues
- Verify database containers are running: `docker-compose ps`
- Check logs: `docker-compose logs user-db`
- Reset database: `docker-compose down -v && docker-compose up -d`

#### Maven Build Issues
- Clean and rebuild: `mvn clean compile`
- Update dependencies: `mvn dependency:resolve`
- Check Java version compatibility

#### IDE Issues
- Reimport Maven project
- Invalidate caches and restart
- Check project SDK configuration

### Getting Help
- Check service logs: `docker-compose logs <service-name>`
- Verify network connectivity: `docker network ls`
- Monitor resource usage: `docker stats`

---

*This development setup guide provides a comprehensive foundation for building the ShowStream platform with proper development tools, environment configuration, and workflows that support professional software development practices.*